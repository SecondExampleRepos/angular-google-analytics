import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class SourceMapService {
  private version: number;
  private sources: string[];
  private names: string[];
  private sourceRoot: string | null;
  private sourcesContents: string[] | null;
  private mappings: string;
  private file: string | null;

  constructor() {
    this.version = 3;
    this.sources = [];
    this.names = [];
    this.sourceRoot = null;
    this.sourcesContents = null;
    this.mappings = '';
    this.file = null;
  }

  setVersion(version: number): void {
    this.version = version;
  }

  getSources(): string[] {
    return this.sources;
  }

  addSource(source: string): void {
    if (!this.sources.includes(source)) {
      this.sources.push(source);
    }
  }

  getNames(): string[] {
    return this.names;
  }

  addName(name: string): void {
    if (!this.names.includes(name)) {
      this.names.push(name);
    }
  }

  setSourceRoot(sourceRoot: string): void {
    this.sourceRoot = sourceRoot;
  }

  getSourcesContent(): string[] | null {
    return this.sourcesContents;
  }

  setSourcesContent(sourcesContents: string[]): void {
    this.sourcesContents = sourcesContents;
  }

  getMappings(): string {
    return this.mappings;
  }

  setMappings(mappings: string): void {
    this.mappings = mappings;
  }

  getFile(): string | null {
    return this.file;
  }

  setFile(file: string): void {
    this.file = file;
  }

  generateSourceMap(): object {
    return {
      version: this.version,
      sources: this.sources,
      names: this.names,
      sourceRoot: this.sourceRoot,
      sourcesContent: this.sourcesContents,
      mappings: this.mappings,
      file: this.file
    };
  }
}